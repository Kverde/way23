"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[1710],{79039:(e,t,s)=>{s.r(t),s.d(t,{data:()=>r});const r={key:"v-6f7c1504",path:"/%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-postgresql-%D0%B2-dokku.html",title:"Установка плагина PostgreSQL в Dokku",lang:"ru-RU",frontmatter:{title:"Установка плагина PostgreSQL в Dokku",date:"2017-09-11",categories:["Базы данных"],tags:["dokku","postgresql"]},excerpt:"",headers:[],filePathRelative:"установка-postgresql-в-dokku.md",git:{updatedTime:169852056e4}}},98159:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var r=s(66252),o=s(3577);const p={id:"frontmatter-title",tabindex:"-1"},n=(0,r._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),a=(0,r.Uk)("Внутри Dokku можно установить "),d={href:"https://www.postgresql.org/",target:"_blank",rel:"noopener noreferrer"},g=(0,r.Uk)("PostgreSQL"),i=(0,r.Uk)(" с помощью "),k={href:"https://github.com/dokku/dokku-postgres",target:"_blank",rel:"noopener noreferrer"},c=(0,r.Uk)("плагина"),u=(0,r.Uk)(". После установки появится возможность создавать базы данных, подключатся к ним, связывать БД с приложениями."),l=(0,r.uE)("<p>Запускаем команду установки</p><p>sudo dokku plugin:install https://github.com/dokku/dokku-postgres.git postgres</p><p>После установки создаем контейнер с БД, название можно выбрать любое, в примере название <code>testdb</code></p><p>qqq@ubuntuserver:~$ dokku postgres:create testdb Waiting for container to be ready Creating container database Securing connection to database =====&gt; Postgres container created: testdb =====&gt; Container Information Config dir: /var/lib/dokku/services/postgres/testdb/config Data dir: /var/lib/dokku/services/postgres/testdb/data Dsn: postgres://postgres:761fa29964ads1scdc4ba39bd332462c5@dokku-postgres-testdb:5432/testdb Exposed ports: - Id: e025333e1ee1ca3569c351d7cad1906e3755976f1bb68f21eac9e4cc9eca6f3a Internal ip: 112.13.0.2 Links: - Service root: /var/lib/dokku/services/postgres/testdb Status: running Version: postgres:9.6.4</p><p>После создания контейнера выводится информация о нем. Для подключения понадобится информация из строки <code>Dsn</code>. Её формат:</p><p><code>postgres://postgres:761fa29964ads1scdc4ba39bd332462c5@dokku-postgres-testdb:5432/testdb postgres://login:password@server:port/db</code></p><p>Эту же информацию можно получить командой</p><p>dokku postgres:info testdb</p><p>Команда для получения списка всех созданных БД</p><p>dokku postgres:list</p><p>Для получения доступа к БД из вне необходимо пробросить порт. Это делается командой <code>expose</code></p><p>qqq@ubuntuserver:~$ dokku postgres:expose testdb -----&gt; Service testdb exposed on port(s) [container-&gt;host]: 5432-&gt;2957</p>",12),b=(0,r.Uk)("Настройки закончены, для подключения к БД устанавливаем "),m={href:"https://www.pgadmin.org/",target:"_blank",rel:"noopener noreferrer"},f=(0,r.Uk)("pgAdmin"),h=(0,r.Uk)(". Добавляем сервер"),D=(0,r.uE)('<p><img src="images/1.png" alt="pgAdmin Добавление БД"></p><p>Заполняем название</p><p><img src="images/2.png" alt="pgAdmin Добавление БД"></p><p>И параметры подключения.</p><p><img src="images/3.png" alt="pgAdmin Добавление БД"></p><p>В поле <strong>host name/address</strong> нужно указать адрес сервера на котором расположен Dokku. <strong>Port</strong> - порт который был получен командой <code>expose</code>. <strong>Database</strong>, <strong>user</strong> и <strong>password</strong> - из строки dsn в описании контейнера.</p><p>После сохранения БД доступна в списке</p><p><img src="images/4.png" alt="pgAdmin Подключение к БД"></p>',8),v={render:function(e,t){const s=(0,r.up)("OutboundLink");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("h1",p,[n,(0,r.Uk)(" "+(0,o.zw)(e.$frontmatter.title),1)]),(0,r._)("p",null,[a,(0,r._)("a",d,[g,(0,r.Wm)(s)]),i,(0,r._)("a",k,[c,(0,r.Wm)(s)]),u]),l,(0,r._)("p",null,[b,(0,r._)("a",m,[f,(0,r.Wm)(s)]),h]),D],64)}}}}]);