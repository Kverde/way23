"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[2273],{20917:(e,n,a)=>{a.r(n),a.d(n,{data:()=>s});const s={key:"v-e90722a0",path:"/debian-server-install-vb.html",title:"Установка сервера Debian на VirtualBox",lang:"ru-RU",frontmatter:{title:"Установка сервера Debian на VirtualBox",date:"2023-10-13",categories:["Операционные системы"],tags:["Debian","VirtualBox"]},excerpt:"",headers:[],filePathRelative:"debian-server-install-vb.md",git:{updatedTime:1700135544e3}}},35162:(e,n,a)=>{a.r(n),a.d(n,{default:()=>q});var s=a(66252),t=a(3577);const r={id:"frontmatter-title",tabindex:"-1"},l=(0,s._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),i=(0,s.Uk)("Debian не содержит отдельной версии для серверов, при установки на сервер нужно не устанавливать GUI рабочего стола. Скачайте "),d={href:"https://www.debian.org/CD/http-ftp/#stable",target:"_blank",rel:"noopener noreferrer"},p=(0,s.Uk)("последнюю стабильную версию"),o=(0,s.Uk)(" Debian, лучше взять DVD образ."),u=(0,s.Uk)("Создайте новую виртуальную машину"),c=(0,s.Uk)(" в VirtualBox. В последних версия VirtualBox отключите автоматическую установку."),b=(0,s.uE)('<p><img src="images/debian-vb/debian-01.png" alt=""></p><p>Зайдите в настройки виртуальной машины и измените сетевой адаптер на <code>Bridget adapter</code>.</p><p>После запуска виртуальной машины выберите консольный вариант установки:</p><p><img src="images/debian-vb/debian-02.png" alt=""></p><p>Установите подходящий <code>hostname</code>, он пригодится для подключения к виртуальной машине по SSH.</p><p><img src="images/debian-vb/debian-02-1.png" alt=""></p><p>В следующих шагах оставляйте настройки по умолчанию, выберите подходящий пароль для root, имя пользователя и пароль для пользователя.</p><p>Откажитесь от предложений установить дополнительные компоненты, подключится к сети и отправлять отчеты об установках пакетов.</p><p><img src="images/debian-vb/debian-03.png" alt=""></p><p><img src="images/debian-vb/debian-04.png" alt=""></p><p><img src="images/debian-vb/debian-05.png" alt=""></p><p>Во время шага выбора компонентов отключите <code>Debian desktop environment</code> и включите <code>SSH server</code>.</p><p><img src="images/debian-vb/debian-06.png" alt=""></p><p>Во время вопроса о том устанавливать ли GRUB выберите <code>yes</code>.</p><p><img src="images/debian-vb/debian-07.png" alt=""></p><p>Затем выберите устройство, чтобы не вводить его название вручную.</p><p><img src="images/debian-vb/debian-08.png" alt=""></p><p>При установке Debian без графического окружения автоматически не устанавливаются пакеты, нужные для работы сети. Для возможности установки пакетов из онлайн репозиториев, а не с диска, измените файл <code>/etc/apt/sources.list</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>su -l # войти в режим суперпользователя\nnano /etc/apt/sources.list\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Удалите из него все строки (<code>ctrl+k</code>) и введете следующую строку:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>deb http://deb.debian.org/debian bookworm main\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',21),m=(0,s.Uk)("Теперь установите "),g=(0,s._)("code",null,"sudo",-1),v=(0,s.Uk)(" ("),D={href:"https://wiki.debian.org/DebianInstall#Post-Install_Tips",target:"_blank",rel:"noopener noreferrer"},x=(0,s.Uk)("Советы после установки Debian"),k=(0,s.Uk)("):"),h=(0,s.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>apt update\napt install sudo\nadduser user sudo # добавить пользователя user в группу sudo \nexit # выйти из режима суперпользователя\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Описание команды <code>adduser</code> из <code>man</code>:</p><blockquote><p>Add an existing user to an existing group. If called with two non-option arguments, adduser will add an existing user to an existing group.</p></blockquote><p>Добавление пользователя в группу <code>sudo</code> нужно, чтобы у пользователя была возможность использовать команду <code>sudo</code>. Чтобы добавление в группу сработало выйдите из пользователя командой <code>logout</code> и снова введите логин и пароль.</p><p>Теперь установите пакеты для работы сети:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo apt install network-manager \nsudo apt install net-tools \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>И затем обновите все пакеты:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo apt update\nsudo apt upgrade\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',8),B=(0,s.Uk)("Чтобы "),f={href:"https://www.debian.org/releases/bookworm/amd64/release-notes/ch-information.html#non-free-split",target:"_blank",rel:"noopener noreferrer"},w=(0,s.Uk)("убрать сообщение"),_=(0,s.Uk)(" при команде "),U=(0,s._)("code",null,"apt update",-1),E=(0,s.Uk)(" создайте файл"),V=(0,s.uE)('<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo nano /etc/apt/apt.conf.d/no-bookworm-firmware.conf\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>И введите в него следующий текст:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># Description:\n# https://www.debian.org/releases/bookworm/amd64/release-notes/ch-information.html#non-free-split\n\nAPT::Get::Update::SourceListWarnings::NonFreeFirmware &quot;false&quot;;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>',3),W=(0,s.Uk)("Выключите виртуальную машину и запустите виртуальную машину в фоновом режиме. Теперь вы можете "),y=(0,s.Uk)("подключится к серверу по ssh"),C=(0,s.Uk)(" из консоли используя имя сервера и пользователя указанные при установке."),S=(0,s._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,s._)("pre",{class:"language-text"},[(0,s._)("code",null,"ssh user@debian-server\n")]),(0,s._)("div",{class:"line-numbers"},[(0,s._)("span",{class:"line-number"},"1"),(0,s._)("br")])],-1),q={render:function(e,n){const a=(0,s.up)("OutboundLink"),q=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("h1",r,[l,(0,s.Uk)(" "+(0,t.zw)(e.$frontmatter.title),1)]),(0,s._)("p",null,[i,(0,s._)("a",d,[p,(0,s.Wm)(a)]),o]),(0,s._)("p",null,[(0,s.Wm)(q,{to:"/virtualbox-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B8-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B9-%D0%BC.html"},{default:(0,s.w5)((()=>[u])),_:1}),c]),b,(0,s._)("p",null,[m,g,v,(0,s._)("a",D,[x,(0,s.Wm)(a)]),k]),h,(0,s._)("p",null,[B,(0,s._)("a",f,[w,(0,s.Wm)(a)]),_,U,E]),V,(0,s._)("p",null,[W,(0,s.Wm)(q,{to:"/add-ssh-key.html"},{default:(0,s.w5)((()=>[y])),_:1}),C]),S],64)}}}}]);