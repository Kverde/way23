"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[497],{62854:(s,n,a)=>{a.r(n),a.d(n,{data:()=>e});const e={key:"v-b5cd8700",path:"/linux-file-link.html",title:"Ссылки на файлы в Linux",lang:"ru-RU",frontmatter:{title:"Ссылки на файлы в Linux",date:"2023-11-26",categories:["Linux"],tags:["ln","ls"]},excerpt:"",headers:[],filePathRelative:"linux-file-link.md",git:{updatedTime:1700942389e3}}},54556:(s,n,a)=>{a.r(n),a.d(n,{default:()=>c});var e=a(66252),p=a(3577);const r={id:"frontmatter-title",tabindex:"-1"},l=(0,e._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),t=(0,e.uE)('<p>В Linux можно создать два вида ссылок на файлы: жесткая ссылка и символическая ссылка.</p><p>Жесткая ссылка, это по сути, второе название файла. Дело в том, что название файла хранится не в самом фале, а в каталоге, который содержит файл. Сам файл уникально идентифицируется по индексному дескриптору. Можно сделать несколько ссылок на один файл, с одним и тем же индексным дескриптором — это и будет жесткой ссылкой. Файл не будет удален пока будет существовать хотя бы одна ссылка.</p><p>Посмотреть индексный дескриптор можно командами <code>stat</code> и <code>ls -li</code>. Команда <code>ls</code> так же показывает количество жестких ссылок на файл после прав доступа. Создаются жесткие ссылки командой <code>ln</code>.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:~/test$ <span class="token function">touch</span> file.txt\nuser@debian-server:~/test$ <span class="token function">stat</span> file.txt \n  File: file.txt\n  Size: <span class="token number">0</span>         \tBlocks: <span class="token number">0</span>          IO Block: <span class="token number">4096</span>   regular empty <span class="token function">file</span>\nDevice: <span class="token number">8,1</span>\tInode: <span class="token number">1086409</span>     Links: <span class="token number">1</span>\nAccess: <span class="token punctuation">(</span>0644/-rw-r--r--<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>\nAccess: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\nModify: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\nChange: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\n Birth: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\nuser@debian-server:~/test$ <span class="token function">ls</span> -li\ntotal <span class="token number">0</span>\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">1</span> user user <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 file.txt\n\nuser@debian-server:~/test$ <span class="token function">ln</span> file.txt link.txt\nuser@debian-server:~/test$ <span class="token function">stat</span> link.txt \n  File: link.txt\n  Size: <span class="token number">0</span>         \tBlocks: <span class="token number">0</span>          IO Block: <span class="token number">4096</span>   regular empty <span class="token function">file</span>\nDevice: <span class="token number">8,1</span>\tInode: <span class="token number">1086409</span>     Links: <span class="token number">2</span>\nAccess: <span class="token punctuation">(</span>0644/-rw-r--r--<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>\nAccess: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\nModify: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\nChange: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:38:45.836093696 -0500\n Birth: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:36:44.515934214 -0500\nuser@debian-server:~/test$ <span class="token function">ls</span> -li\ntotal <span class="token number">0</span>\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">2</span> user user <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 file.txt\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">2</span> user user <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 link.txt\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>Жесткие ссылки можно создать только внутри одной файловой системы: например, не получится создать жесткую ссылку с одного диска на другой.</p><p>В отличии от жестких ссылок, который по сути, являются ссылками на один и тот же файл, символические ссылки это отдельный файл, который содержит путь к другому файлу. Создаются символические ссылки командой <code>ln</code> с параметром <code>-s</code>.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:~/test$ <span class="token function">ln</span> -s file.txt slink.txt\nuser@debian-server:~/test$ <span class="token function">ls</span> -li\ntotal <span class="token number">0</span>\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">2</span> user user <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 file.txt\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">2</span> user user <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 link.txt\n<span class="token number">1086405</span> lrwxrwxrwx <span class="token number">1</span> user user <span class="token number">8</span> ноя <span class="token number">25</span> <span class="token number">14</span>:47 slink.txt -<span class="token operator">&gt;</span> file.txt\nuser@debian-server:~/test$ <span class="token function">stat</span> slink.txt\n  File: slink.txt -<span class="token operator">&gt;</span> file.txt\n  Size: <span class="token number">8</span>         \tBlocks: <span class="token number">0</span>          IO Block: <span class="token number">4096</span>   symbolic <span class="token function">link</span>\nDevice: <span class="token number">8,1</span>\tInode: <span class="token number">1086405</span>     Links: <span class="token number">1</span>\nAccess: <span class="token punctuation">(</span>0777/lrwxrwxrwx<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>\nAccess: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:47:42.345498037 -0500\nModify: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:47:36.533511149 -0500\nChange: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:47:36.533511149 -0500\n Birth: <span class="token number">2023</span>-11-25 <span class="token number">14</span>:47:36.533511149 -0500\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Символическая ссылка — это строка с точным именем файла, который был передан в команду <code>ln</code>, поэтому можно использовать как относительные так и абсолютные пути.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:~/test$ <span class="token function">ln</span> -s /home/user/test/file.txt slink2.txt\nuser@debian-server:~/test$ <span class="token function">ls</span> -li\ntotal <span class="token number">0</span>\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">2</span> user user  <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 file.txt\n<span class="token number">1086409</span> -rw-r--r-- <span class="token number">2</span> user user  <span class="token number">0</span> ноя <span class="token number">25</span> <span class="token number">14</span>:36 link.txt\n<span class="token number">1086411</span> lrwxrwxrwx <span class="token number">1</span> user user <span class="token number">24</span> ноя <span class="token number">25</span> <span class="token number">14</span>:50 slink2.txt -<span class="token operator">&gt;</span> /home/user/test/file.txt\n<span class="token number">1086405</span> lrwxrwxrwx <span class="token number">1</span> user user  <span class="token number">8</span> ноя <span class="token number">25</span> <span class="token number">14</span>:47 slink.txt -<span class="token operator">&gt;</span> file.txt\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>В данном примере все ссылки ссылаются на один файл:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:~/test$ <span class="token builtin class-name">echo</span> hello <span class="token operator">&gt;&gt;</span> file.txt\nuser@debian-server:~/test$ <span class="token function">cat</span> link.txt \nhello\nuser@debian-server:~/test$ <span class="token function">cat</span> slink.txt \nhello\nuser@debian-server:~/test$ <span class="token function">cat</span> slink2.txt \nhello\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Права у всех жестких ссылок на один файл совпадают, так как права относятся к файлу.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:~/test$ <span class="token function">chmod</span> o+x link.txt \nuser@debian-server:~/test$ <span class="token function">ls</span> -li\ntotal <span class="token number">8</span>\n<span class="token number">1086409</span> -rw-r--r-x <span class="token number">2</span> user user  <span class="token number">6</span> ноя <span class="token number">25</span> <span class="token number">14</span>:52 file.txt\n<span class="token number">1086409</span> -rw-r--r-x <span class="token number">2</span> user user  <span class="token number">6</span> ноя <span class="token number">25</span> <span class="token number">14</span>:52 link.txt\n<span class="token number">1086411</span> lrwxrwxrwx <span class="token number">1</span> user user <span class="token number">24</span> ноя <span class="token number">25</span> <span class="token number">14</span>:50 slink2.txt -<span class="token operator">&gt;</span> /home/user/test/file.txt\n<span class="token number">1086405</span> lrwxrwxrwx <span class="token number">1</span> user user  <span class="token number">8</span> ноя <span class="token number">25</span> <span class="token number">14</span>:47 slink.txt -<span class="token operator">&gt;</span> file.txt\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Права у символических ссылок не имеют значения, так как для доступа к файлу применяются права файла, который находится по указанному пути.</p><p>В команде <code>ls</code> первый символ равен <code>-</code> у всех жестких ссылок на файл, а у символических ссылок этот символ равен <code>l</code>.</p>',15),c={render:function(s,n){return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("h1",r,[l,(0,e.Uk)(" "+(0,p.zw)(s.$frontmatter.title),1)]),t],64)}}}}]);