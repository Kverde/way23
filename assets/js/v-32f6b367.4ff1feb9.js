"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[6972],{79:(n,s,a)=>{a.r(s),a.d(s,{data:()=>e});const e={key:"v-32f6b367",path:"/oracle-not-in-%D0%B8-null.html",title:"Oracle. not in и null",lang:"ru-RU",frontmatter:{title:"Oracle. not in и null",date:"2019-04-15",categories:["Базы данных"],tags:["sql","oracle"]},excerpt:"",headers:[],filePathRelative:"oracle-not-in-и-null.md",git:{updatedTime:1692859375e3}}},12167:(n,s,a)=>{a.r(s),a.d(s,{default:()=>x});var e=a(66252),t=a(3577);const p={id:"frontmatter-title",tabindex:"-1"},l=(0,e._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),o=(0,e.uE)('<p>Если в колонке внутри подзапроса <code>not in</code> возможно появление <code>null</code> то это может привести к неверному поведению.</p><p>Рассмотрим пример, сделаем две таблицы:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> test<span class="token punctuation">.</span>table1 \n  <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token keyword">value</span> v \n     <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>odcinumberlist<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">create</span> <span class="token keyword">table</span> test<span class="token punctuation">.</span>table2 \n  <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token keyword">value</span> v \n     <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>odcinumberlist<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Запрос с <code>in</code> возвращает то что ожидается</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> \n  t<span class="token punctuation">.</span><span class="token keyword">value</span> \n<span class="token keyword">from</span> \n  test<span class="token punctuation">.</span>table1 t \n<span class="token keyword">where</span> \n  t<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> t<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token keyword">from</span> test<span class="token punctuation">.</span>table2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>1 3</p></blockquote><p>А вот запрос с <code>not in</code> не возвращает вообще ничего</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> \n  t<span class="token punctuation">.</span><span class="token keyword">value</span> \n<span class="token keyword">from</span> \n  test<span class="token punctuation">.</span>table1 t \n<span class="token keyword">where</span> \n  t<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> t<span class="token punctuation">.</span><span class="token keyword">value</span> <span class="token keyword">from</span> test<span class="token punctuation">.</span>table2<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>',8),c=(0,e.Uk)("И так будет всегда если в результате подзапроса присутствует "),r=(0,e._)("code",null,"null",-1),u=(0,e.Uk)(". Таким образом, если делается запрос с "),k=(0,e._)("code",null,"not in",-1),i=(0,e.Uk)(", всегда нужно проверить что колонка в подзапросе является "),d=(0,e._)("code",null,"not null",-1),b=(0,e.Uk)(". Или заменить условие, например на "),m={href:"https://asktom.oracle.com/pls/asktom/f?p=100:11:0::no::p11_question_id:442029737684",target:"_blank",rel:"noopener noreferrer"},w=(0,e.Uk)("not exists"),y=(0,e.Uk)("."),v={href:"https://habr.com/ru/post/127327/",target:"_blank",rel:"noopener noreferrer"},f=(0,e.Uk)("Подробная статья"),g=(0,e.Uk)(" про поведение "),h=(0,e._)("code",null,"null",-1),_=(0,e.Uk)(" в Oracle, в том числе разобрана ситуация с "),q=(0,e._)("code",null,"not in",-1),U=(0,e.Uk)("."),x={render:function(n,s){const a=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("h1",p,[l,(0,e.Uk)(" "+(0,t.zw)(n.$frontmatter.title),1)]),o,(0,e._)("p",null,[c,r,u,k,i,d,b,(0,e._)("a",m,[w,(0,e.Wm)(a)]),y]),(0,e._)("p",null,[(0,e._)("a",v,[f,(0,e.Wm)(a)]),g,h,_,q,U])],64)}}}}]);