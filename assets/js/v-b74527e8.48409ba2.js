"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[5893],{52209:(n,e,s)=>{s.r(e),s.d(e,{data:()=>a});const a={key:"v-b74527e8",path:"/%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F-%D0%B8%D0%BD%D0%B8%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5.html",title:"Автоматическая инициализация переменных в Delphi",lang:"ru-RU",frontmatter:{title:"Автоматическая инициализация переменных в Delphi",date:"2019-04-19",categories:["Delphi"],tags:["Delphi","совершенный-код"]},excerpt:"",headers:[{level:2,title:"Выводы",slug:"выводы",children:[]},{level:2,title:"Ссылки",slug:"ссылки",children:[]}],filePathRelative:"автоматическая-инициализация-переме.md",git:{updatedTime:1692859375e3}}},27550:(n,e,s)=>{s.r(e),s.d(e,{default:()=>B});var a=s(66252),r=s(3577);const l={id:"frontmatter-title",tabindex:"-1"},p=(0,a._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),i=(0,a.uE)('<p>Переменные в Delphi можно разделить на три типа</p><ul><li>Глобальные</li><li>Локальные</li><li>Поля объектов</li></ul><p>Разные типы имеют свои особенности инициализация по умолчанию. Глобальные переменные — переменные которые объявлены в теле модуля всегда инициализируются автоматически. Например, числовые типы всегда будут равны нулю.</p><div class="language-delphi ext-delphi line-numbers-mode"><pre class="language-delphi"><code>implementation\n\n{$R *.dfm}\n\nvar\n  GlobalVar: Integer;\n\nprocedure TForm1.Button1Click(Sender: TObject);\nbegin\n  ShowMessage(IntToStr(GlobalVar)); // 0\nend;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Локальные переменные — переменные объявленные внутри функций, процедур или методов не инициализируются автоматически. Их значение можно считать случайным. Например, следующий код будет выводить разное сообщение при каждом запуске программы</p><div class="language-delphi ext-delphi line-numbers-mode"><pre class="language-delphi"><code>procedure TForm1.Button2Click(Sender: TObject);\nvar\n  LocalVar: Integer;\nbegin\n  ShowMessage(IntToStr(LocalVar)); // 345342 или другие случайное число\nend;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Опаснее всего ситуация с объектными типами.</p><div class="language-delphi ext-delphi line-numbers-mode"><pre class="language-delphi"><code>procedure TForm1.Button2Click(Sender: TObject);\nvar\n  LocalVar: TObject;\nbegin\n  ShowMessage(BoolToStr(LocalVar = nil, True));  // False\nend;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>В переменной находится случайны адрес, следовательно вызов методов и изменение полей приведёт к непредсказуемым результатам.</p><p>Поля объекта инициализируются также как глобальные переменные, причём до того как начнёт выполнятся код из конструктора.</p><div class="language-delphi ext-delphi line-numbers-mode"><pre class="language-delphi"><code>type\n  TMyClass = class\n    FVar: Integer;\n    constructor Create;\n  end;\n\n{ TMyClass }\n\nconstructor TMyClass.Create;\nbegin\n  ShowMessage(IntToStr(FVar)); // 0\nend;\n\nprocedure TForm1.Button3Click(Sender: TObject);\nvar\n  Obj: TMyClass;\nbegin\n  Obj := TMyClass.Create;\n  FreeAndNil(Obj);\nend;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="выводы" tabindex="-1"><a class="header-anchor" href="#выводы" aria-hidden="true">#</a> Выводы</h2><p>Глобальные и локальные перемеренные обязательно нужно инициализировать в явном виде, это позволяет избежать большого количества проблем и повышает читаемость.</p>',13),b=(0,a.Uk)("Поля объектов можно инициализировать в конструкторе. Это обязательно нужно делать для некоторых типов, например, для Variant, так как "),c={href:"http://way23.ru/%D0%BF%D1%80%D0%B5%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%82%D0%B8%D0%BF%D0%BE%D0%B2-%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B9-null-%D0%B8-unassigned-%D1%82%D0%B8/",target:"_blank",rel:"noopener noreferrer"},t=(0,a.Uk)("по умолчанию они равны Unassigned"),u=(0,a.Uk)(". Для строк и чисел особого смысла в инициализации нулями и пустыми строками нет, возможно, для унификации."),d=(0,a._)("h2",{id:"ссылки",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#ссылки","aria-hidden":"true"},"#"),(0,a.Uk)(" Ссылки")],-1),D={href:"http://docwiki.embarcadero.com/RADStudio/Rio/en/Variables_(Delphi)",target:"_blank",rel:"noopener noreferrer"},m=(0,a.Uk)("Раздел документации"),o=(0,a.Uk)(" про переменные."),B={render:function(n,e){const s=(0,a.up)("OutboundLink");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("h1",l,[p,(0,a.Uk)(" "+(0,r.zw)(n.$frontmatter.title),1)]),i,(0,a._)("p",null,[b,(0,a._)("a",c,[t,(0,a.Wm)(s)]),u]),d,(0,a._)("p",null,[(0,a._)("a",D,[m,(0,a.Wm)(s)]),o])],64)}}}}]);