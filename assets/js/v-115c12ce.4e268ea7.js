"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[9949],{54159:(s,n,a)=>{a.r(n),a.d(n,{data:()=>e});const e={key:"v-115c12ce",path:"/linux-chmod-directory.html",title:"Права на директории в Linux",lang:"ru-RU",frontmatter:{title:"Права на директории в Linux",date:"2023-11-15",categories:["Linux"],tags:["chmod"]},excerpt:"",headers:[{level:2,title:"Ссылки",slug:"ссылки",children:[]}],filePathRelative:"linux-chmod-directory.md",git:{updatedTime:1700065046e3}}},62219:(s,n,a)=>{a.r(n),a.d(n,{default:()=>m});var e=a(66252),p=a(3577);const t={id:"frontmatter-title",tabindex:"-1"},l=(0,e._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),c=(0,e.Uk)("Назначение "),r=(0,e.Uk)("прав доступа"),i=(0,e.Uk)(" для директорий в Linux не очевидно. Сразу не понятно, чем отличается право на запись от права на выполнения и как все три вида прав работают по отдельности."),o=(0,e.uE)('<p>Прежде всего, права на запись в каталог (<code>-w-</code>) не отличаются от отсутствия прав на каталог (<code>---</code>).</p><p>Право на чтение для каталога (<code>-r-</code>) влияет только на одно — на возможность просмотра списка файлов в каталоге, причем без права на выполнение, эта возможность тоже ограничена: можно увидеть только названия файлов, без дополнительной информации.</p><p>Для проверки создадим каталог и файл, внутри каталога.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:~$ <span class="token function">mkdir</span> /tmp/test\nuser@debian-server:~$ <span class="token builtin class-name">cd</span> /tmp/test\nuser@debian-server:/tmp/test$ <span class="token builtin class-name">echo</span> hello <span class="token operator">&gt;</span> hello.txt\nuser@debian-server:/tmp/test$ <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Теперь установим права для владельца файла только для чтения, а остальные обнулим.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:/tmp$ <span class="token function">chmod</span> <span class="token number">400</span> <span class="token builtin class-name">test</span>\nuser@debian-server:/tmp$ <span class="token function">stat</span> <span class="token builtin class-name">test</span>\n  File: <span class="token builtin class-name">test</span>\n  Size: <span class="token number">4096</span>      \tBlocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   directory\nDevice: <span class="token number">8,1</span>\tInode: <span class="token number">654090</span>      Links: <span class="token number">2</span>\nAccess: <span class="token punctuation">(</span>0400/dr--------<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>\nAccess: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:01.202353818 -0500\nModify: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:09.550303047 -0500\nChange: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:23.474218359 -0500\n Birth: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:01.202353818 -0500\nuser@debian-server:/tmp$ <span class="token function">ls</span> <span class="token builtin class-name">test</span>\nls: cannot access <span class="token string">&#39;test/hello.txt&#39;</span><span class="token builtin class-name">:</span> Permission denied\nhello.txt\nuser@debian-server:/tmp$ <span class="token builtin class-name">cd</span> <span class="token builtin class-name">test</span>\nbash: cd: test: Permission denied\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Команда &#39;ls&#39; сработала, хоть и с ограничениями, а вот перейти в каталог, с помощью <code>cd</code> уже нельзя.</p><p>Теперь рассмотрим право на выполнение (<code>--x</code>). Это право отвечает за возможность заходить в каталог, читать файлы и даже менять файлы. Основное ограничение без права на запись (<code>r--</code>) в том, что не будет доступен список файлов через команду <code>ls</code> и не будет работать автодополнение названия файла через <code>TAB</code>. По сути, это означает что можно работать с уже созданными файлами, но нужно знать их имена. Проверим это.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>user@debian-server:/tmp$ <span class="token function">chmod</span> <span class="token number">100</span> <span class="token builtin class-name">test</span>\nuser@debian-server:/tmp$ <span class="token function">stat</span> <span class="token builtin class-name">test</span>\n  File: <span class="token builtin class-name">test</span>\n  Size: <span class="token number">4096</span>      \tBlocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   directory\nDevice: <span class="token number">8,1</span>\tInode: <span class="token number">654090</span>      Links: <span class="token number">2</span>\nAccess: <span class="token punctuation">(</span>0100/d--x------<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span> <span class="token number">1000</span>/    user<span class="token punctuation">)</span>\nAccess: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:38.898124529 -0500\nModify: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:09.550303047 -0500\nChange: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:09:44.975892865 -0500\n Birth: <span class="token number">2023</span>-11-15 <span class="token number">11</span>:03:01.202353818 -0500\nuser@debian-server:/tmp$ <span class="token builtin class-name">cd</span> <span class="token builtin class-name">test</span>\nuser@debian-server:/tmp/test$ <span class="token function">ls</span>\nls: cannot <span class="token function">open</span> directory <span class="token string">&#39;.&#39;</span><span class="token builtin class-name">:</span> Permission denied\nuser@debian-server:/tmp/test$ <span class="token builtin class-name">echo</span> <span class="token builtin class-name">test</span> <span class="token operator">&gt;&gt;</span> hello.txt\nuser@debian-server:/tmp/test$ <span class="token function">cat</span> hello.txt\nhello\n<span class="token builtin class-name">test</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Ещё одна особенность — если у каталога нет права на выполнение (<code>--x</code>), то нельзя будет войти через <code>cd</code> и в дочернии каталоги, даже если у них будет это право.</p><p>Права на запись (<code>-w-</code>) добавляют возможность создавать, удалять и переименовывать файлы.</p><h2 id="ссылки" tabindex="-1"><a class="header-anchor" href="#ссылки" aria-hidden="true">#</a> Ссылки</h2>',12),u={href:"https://unix.stackexchange.com/questions/21251/execute-vs-read-bit-how-do-directory-permissions-in-linux-work",target:"_blank",rel:"noopener noreferrer"},b=(0,e.Uk)("Execute vs Read bit. How do directory permissions in Linux work?"),m={render:function(s,n){const a=(0,e.up)("RouterLink"),m=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e._)("h1",t,[l,(0,e.Uk)(" "+(0,p.zw)(s.$frontmatter.title),1)]),(0,e._)("p",null,[c,(0,e.Wm)(a,{to:"/linux-chmod.html"},{default:(0,e.w5)((()=>[r])),_:1}),i]),o,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("a",u,[b,(0,e.Wm)(m)])])])],64)}}}}]);