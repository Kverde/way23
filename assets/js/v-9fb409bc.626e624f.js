"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[1361],{46266:(e,d,t)=>{t.r(d),t.d(d,{data:()=>r});const r={key:"v-9fb409bc",path:"/%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%BE%D0%B2-delphi-%D0%B8%D0%B7-%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D0%B8.html",title:"Сборка проектов Delphi из консоли",lang:"ru-RU",frontmatter:{title:"Сборка проектов Delphi из консоли",date:"2017-01-21",categories:["Delphi"],tags:["Delphi","ci"]},excerpt:"",headers:[],filePathRelative:"сборка-проектов-delphi-из-консоли.md",git:{updatedTime:1692859375e3}}},32622:(e,d,t)=>{t.r(d),t.d(d,{default:()=>_});var r=t(66252),o=t(3577);const a={id:"frontmatter-title",tabindex:"-1"},l=(0,r._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),i=(0,r.Uk)("В этой заметке показано как собирать проекты Delphi с помощью bat-файла. Компиляция из консоли часто используется для сборки "),p={href:"http://way23.ru/%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d0%b8-%d1%81%d0%b1%d0%be%d1%80%d0%ba%d0%b8-delphi-%d0%b2%d0%be-%d0%b2%d0%bd%d0%b5%d1%88%d0%bd%d0%b5%d0%bc-%d1%84%d0%b0%d0%b9%d0%bb/",target:"_blank",rel:"noopener noreferrer"},b=(0,r.Uk)("релизной версии"),n=(0,r.Uk)("."),u=(0,r._)("p",null,"Файлы проектов Delphi (.dproj) совместимы с системой сборки MSBuild. Разные версии Delphi требуют разную версия MSBuild поэтому сначала желательно обновить Microsoft .NET Framework.",-1),c=(0,r._)("p",null,[(0,r.Uk)("Также успешная сборка требует специально установленных переменных окружения. Переменные отличаются у каждой версии Delphi. Специальный файл "),(0,r._)("code",null,"rsvars.bat"),(0,r.Uk)(" устанавливает их, он находится в "),(0,r._)("code",null,"bin"),(0,r.Uk)(", рядом c "),(0,r._)("code",null,"bds.exe"),(0,r.Uk)(".")],-1),s=(0,r.Uk)("Delphi может быть установлен в любой каталог, запишем путь к "),E=(0,r._)("code",null,"rsvars.bat",-1),h=(0,r.Uk)(" в "),D={href:"http://way23.ru/rapid-environment-editor-%d1%80%d0%b5%d0%b4%d0%b0%d0%ba%d1%82%d0%be%d1%80-%d1%81%d0%b8%d1%81%d1%82%d0%b5%d0%bc%d0%bd%d1%8b%d1%85-%d0%bf%d0%b5%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%bd%d1%8b%d1%85-windows/",target:"_blank",rel:"noopener noreferrer"},R=(0,r.Uk)("системную переменную"),f=(0,r.Uk)(" чтобы скрипт выполнялся независимо от того на какой машине выполняется."),B=(0,r.uE)("<p>Для примера системные переменные для Delphi 2010 и XE6</p><p>delphi2010_path = C:\\Program Files (x86)\\Embarcadero\\Studio\\14.0\\bin delphiXE6_path = C:\\Program Files (x86)\\Embarcadero\\RAD Studio\\7.0\\bin</p><p>Скрипт для сборки</p><p>:: Устанавливаем текущую директорию - путь к файлу скрипта :: Это нужно из-за того что для файлов проектов используются :: относительные пути и скрипт должен выполнятся одинаково :: независимо от того где и как он запускается. cd %~dp0</p><p>:: Устанавливаем переменные для сборки Delphi 2010 call &quot;%delphi2010_path%rsvars.bat&quot;</p><p>:: Запускаем команду Clean для - удаление результатов :: предыдущей сборки (dcu, exe) c:\\Windows\\Microsoft.NET\\Framework\\v3.5\\MSBuild.exe &quot;Project1.dproj&quot; /target:Clean /p:config=&quot;Release&quot;</p><p>:: Если произошла ошибка то сразу выходим не выполняя :: следующие команды<br> if not %ERRORLEVEL% == 0 exit %ERRORLEVEL%</p><p>:: Собираем проекта, кофигурация сборки Release c:\\Windows\\Microsoft.NET\\Framework\\v3.5\\MSBuild.exe &quot;Project1.dproj&quot; /target:Build /p:config=&quot;Release&quot; if not %ERRORLEVEL% == 0 exit %ERRORLEVEL%</p><p>:: Устанавливаем переменные для сборки XE6 call &quot;%delphiXE6_path%rsvars.bat&quot;</p><p>c:\\Windows\\Microsoft.NET\\Framework\\v3.5\\MSBuild.exe &quot;ProjectXE6.dproj&quot; /target:Clean /p:config=&quot;Release&quot; if not %ERRORLEVEL% == 0 exit %ERRORLEVEL% c:\\Windows\\Microsoft.NET\\Framework\\v3.5\\MSBuild.exe &quot;ProjectXE6.dproj&quot; /target:Build /p:config=&quot;Release&quot; if not %ERRORLEVEL% == 0 exit %ERRORLEVEL%</p>",10),k={href:"https://github.com/Kverde/way23_examples/tree/master/Delphi/CousoleBuild",target:"_blank",rel:"noopener noreferrer"},m=(0,r.Uk)("Пример на GitHub"),_={render:function(e,d){const t=(0,r.up)("OutboundLink");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("h1",a,[l,(0,r.Uk)(" "+(0,o.zw)(e.$frontmatter.title),1)]),(0,r._)("p",null,[i,(0,r._)("a",p,[b,(0,r.Wm)(t)]),n]),u,c,(0,r._)("p",null,[s,E,h,(0,r._)("a",D,[R,(0,r.Wm)(t)]),f]),B,(0,r._)("p",null,[(0,r._)("a",k,[m,(0,r.Wm)(t)])])],64)}}}}]);