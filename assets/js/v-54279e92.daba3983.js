"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[3139],{47452:(e,a,s)=>{s.r(a),s.d(a,{data:()=>n});const n={key:"v-54279e92",path:"/dokku-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F%D0%BC%D0%B8.html",title:"Dokku. Управление пользователями",lang:"ru-RU",frontmatter:{title:"Dokku. Управление пользователями",date:"2022-06-28",categories:["Программы"],tags:["dokku"]},excerpt:"",headers:[{level:2,title:"Просмотр ключей",slug:"просмотр-ключеи",children:[]},{level:2,title:"Добавление ключей",slug:"добавление-ключеи",children:[]},{level:2,title:"Удаление ключей",slug:"удаление-ключеи",children:[]},{level:2,title:"Ссылки",slug:"ссылки",children:[]}],filePathRelative:"dokku-управление-пользователями.md",git:{updatedTime:1692859375e3}}},18575:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var n=s(66252),t=s(3577);const d={id:"frontmatter-title",tabindex:"-1"},l=(0,n._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),r=(0,n.uE)('<p>При отправке изменений в репозиторий, предпочтительный метод авторизации в Dokku — SSH. Команды для управления ключами:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ssh-keys:add &lt;name&gt; [/path/to/key]                 # Add a new public key by pipe or path\nssh-keys:list [--format text|json] [&lt;name&gt;]        # List of all authorized Dokku public ssh keys\nssh-keys:remove [--fingerprint fingerprint|&lt;name&gt;] # Remove SSH public key by name\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="просмотр-ключеи" tabindex="-1"><a class="header-anchor" href="#просмотр-ключеи" aria-hidden="true">#</a> Просмотр ключей</h2><p>Для просмотра списка добавленных ключей используйте команду</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:list\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Результат:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SHA256:ABC123ABC123+abc123abc123Zabc123abcZ123abc NAME=&quot;admin&quot; SSHCOMMAND_ALLOWED_KEYS=&quot;no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding&quot;\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Результат содержит следующую информацию:</p><ul><li>SSH Key Fingerprint.</li><li>Название ключа (KEY_NAME)</li><li>В параметре <code>SSHCOMMAND_ALLOWED_KEYS</code> находится список настроек SSH, опции разделены запятой</li></ul><p>Ключ определённого пользователя можно запросить доавив ещё один аргумент:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:list admin\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Параметр <code>--format</code> определяет формат вывода, поддверживаются <code>text</code> и <code>json</code>.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:list --format json\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Параметр работает так же для отдельного пользователя:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:list --format json admin\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="добавление-ключеи" tabindex="-1"><a class="header-anchor" href="#добавление-ключеи" aria-hidden="true">#</a> Добавление ключей</h2><p>Ключи добавляются командой <code>ssh-keys:add</code>. Команда вернет отпечаток (fingerprint) ключа.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:add KEY_NAME path/to/id_rsa.pub\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Результат:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>SHA256:ABC123ABC123+abc123abc123Zabc123abcZ123abc\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>KEY_NAME это имя, которое будет использоваться для ссылок на добавленный ключ. Включение слова <code>admin</code> в имя даёт пользователю права на добавление дополнительных ключей удалённо.</p><p>KEY_NAME уникальное имя ключа, попытка использовать имя второй раз приведет к ошибке. Пользователь SSH (Git) всегда <code>dokku</code> и используется для всех действий.</p><p>Администраторы и <code>root</code> могут добавлять ключи удалённо добавляя <code>dokku</code> в свои команды:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat ~/.ssh/id_rsa.pub | ssh root@dokku.me dokku ssh-keys:add KEY_NAME\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Если вы используете Vagrant, то вы можете так же использовать <code>vagrant-acl-add</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cat ~/.ssh/id_rsa.pub | make vagrant-acl-add\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="удаление-ключеи" tabindex="-1"><a class="header-anchor" href="#удаление-ключеи" aria-hidden="true">#</a> Удаление ключей</h2><p>Имя ключа уникально и может использоваться для удаления ключа:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:remove KEY_NAME\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Ключ так же может быть удалён по отпечатку:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dokku ssh-keys:remove --fingerprint FINGERPRINT\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="ссылки" tabindex="-1"><a class="header-anchor" href="#ссылки" aria-hidden="true">#</a> Ссылки</h2>',32),i=(0,n.Uk)("Документация по Dokku - "),c={href:"https://dokku.com/docs/deployment/user-management/",target:"_blank",rel:"noopener noreferrer"},o=(0,n.Uk)("User Management"),u={render:function(e,a){const s=(0,n.up)("OutboundLink");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("h1",d,[l,(0,n.Uk)(" "+(0,t.zw)(e.$frontmatter.title),1)]),r,(0,n._)("p",null,[i,(0,n._)("a",c,[o,(0,n.Wm)(s)])])],64)}}}}]);