"use strict";(self.webpackChunkway23=self.webpackChunkway23||[]).push([[9975],{90681:(e,t,a)=>{a.r(t),a.d(t,{data:()=>r});const r={key:"v-4890bd4d",path:"/python-telegram-bot-1-%D0%BF%D1%80%D0%BE%D1%81%D1%82%D0%BE%D0%B9-%D1%8D%D1%85%D0%BE-%D0%B1%D0%BE%D1%82.html",title:"Python-telegram-bot 1. Простой эхо-бот",lang:"ru-RU",frontmatter:{title:"Python-telegram-bot 1. Простой эхо-бот",date:"2017-01-23",categories:["Python"],tags:["бот"]},excerpt:"",headers:[],filePathRelative:"python-telegram-bot-1-простой-эхо-бот.md",git:{updatedTime:1692859375e3}}},19405:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(66252),d=a(3577);const h={id:"frontmatter-title",tabindex:"-1"},n=(0,r._)("a",{class:"header-anchor",href:"#frontmatter-title","aria-hidden":"true"},"#",-1),o=(0,r._)("p",null,[(0,r._)("img",{src:"images/python_telegram_bot_1.png",alt:"Эхо-бот Telegram"})],-1),p=(0,r.Uk)("В этом цикле постов описаны возможности "),l={href:"https://python-telegram-bot.org/",target:"_blank",rel:"noopener noreferrer"},s=(0,r.Uk)("Python-telegram-bot"),i=(0,r.Uk)(" - библиотеки для написания ботов Telegram."),c=(0,r.Uk)("Первым делом "),m={href:"http://way23.ru/%d1%80%d0%b5%d0%b3%d0%b8%d1%81%d1%82%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d0%b1%d0%be%d1%82%d0%b0-%d0%b2-telegram/",target:"_blank",rel:"noopener noreferrer"},u=(0,r.Uk)("регистрируем"),b=(0,r.Uk)(" нового бота в Telegram."),g=(0,r.uE)('<p>Затем устанавливаем библиотеку <code>python-telegram-bot</code></p><p>pip install python-telegram-bot</p><p>Наш бот будет уметь только два действия: отвечать на команду <code>/start</code> и в ответ на любое сообщение, которое не является командой, отправлять текст присланного сообщения.</p><p>Командой считается сообщение которое начинается с символа &quot;/&quot;. Команда <code>/start</code> отправляется автоматически боту при добавлении его в список контактов. Но ничего не мешает отправить её после этого вручную.</p><p>from telegram.ext import Updater, CommandHandler, MessageHandler, Filters</p><h1 id="токен-полученныи-при-регистрации-бота" tabindex="-1"><a class="header-anchor" href="#токен-полученныи-при-регистрации-бота" aria-hidden="true">#</a> токен полученный при регистрации бота</h1><p>telegram_token = &#39;my_telegram_token&#39;</p><h1 id="start-вызывается-после-команды-start" tabindex="-1"><a class="header-anchor" href="#start-вызывается-после-команды-start" aria-hidden="true">#</a> start вызывается после команды /start</h1><p>def start(bot, update): update.message.reply_text(&#39;Привет&#39;)</p><h1 id="echo-вызывается-после-любого-текстового-сообщения" tabindex="-1"><a class="header-anchor" href="#echo-вызывается-после-любого-текстового-сообщения" aria-hidden="true">#</a> echo вызывается после любого текстового сообщения</h1><p>def echo(bot, update): update.message.reply_text(update.message.text)</p><h1 id="создаем-основнои-объект-для-управления-ботом" tabindex="-1"><a class="header-anchor" href="#создаем-основнои-объект-для-управления-ботом" aria-hidden="true">#</a> создаём основной объект для управления ботом</h1><p>updater = Updater(telegram_token)</p><h1 id="регистрируем-процедуру-start-как-обработчик-команды-start" tabindex="-1"><a class="header-anchor" href="#регистрируем-процедуру-start-как-обработчик-команды-start" aria-hidden="true">#</a> регистрируем процедуру start как обработчик команды start</h1><p>updater.dispatcher.add_handler(CommandHandler(&#39;start&#39;, start))</p><h1 id="регистрируем-процедуру-echo-как-обработчик-текстового-сообщения" tabindex="-1"><a class="header-anchor" href="#регистрируем-процедуру-echo-как-обработчик-текстового-сообщения" aria-hidden="true">#</a> регистрируем процедуру echo как обработчик текстового сообщения</h1><p>updater.dispatcher.add_handler(MessageHandler(Filters.text, echo))</p><h1 id="запускаем-бота" tabindex="-1"><a class="header-anchor" href="#запускаем-бота" aria-hidden="true">#</a> запускаем бота</h1><p>updater.start_polling() updater.idle()</p><p>Запуск бота в консоли</p><p>python main.py</p><p>Для остановки бота нажмите <code>ctrl+C</code></p>',22),_={href:"https://github.com/Kverde/way23_examples/tree/master/python_telegram_bot/echo_bot",target:"_blank",rel:"noopener noreferrer"},f=(0,r.Uk)("Пример на GitHub"),y={render:function(e,t){const a=(0,r.up)("OutboundLink");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("h1",h,[n,(0,r.Uk)(" "+(0,d.zw)(e.$frontmatter.title),1)]),o,(0,r._)("p",null,[p,(0,r._)("a",l,[s,(0,r.Wm)(a)]),i]),(0,r._)("p",null,[c,(0,r._)("a",m,[u,(0,r.Wm)(a)]),b]),g,(0,r._)("p",null,[(0,r._)("a",_,[f,(0,r.Wm)(a)])])],64)}}}}]);